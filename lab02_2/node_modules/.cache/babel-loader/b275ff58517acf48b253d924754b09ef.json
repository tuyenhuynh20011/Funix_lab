{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createFormClass = undefined;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactRedux = require('react-redux');\n\nvar _shallowEqual = require('../utils/shallow-equal');\n\nvar _shallowEqual2 = _interopRequireDefault(_shallowEqual);\n\nvar _get2 = require('../utils/get');\n\nvar _get3 = _interopRequireDefault(_get2);\n\nvar _omit = require('../utils/omit');\n\nvar _omit2 = _interopRequireDefault(_omit);\n\nvar _actions = require('../actions');\n\nvar _actions2 = _interopRequireDefault(_actions);\n\nvar _getValidity = require('../utils/get-validity');\n\nvar _getValidity2 = _interopRequireDefault(_getValidity);\n\nvar _invertValidators = require('../utils/invert-validators');\n\nvar _invertValidators2 = _interopRequireDefault(_invertValidators);\n\nvar _isValidityInvalid = require('../utils/is-validity-invalid');\n\nvar _isValidityInvalid2 = _interopRequireDefault(_isValidityInvalid);\n\nvar _isValid = require('../form/is-valid');\n\nvar _isValid2 = _interopRequireDefault(_isValid);\n\nvar _getForm = require('../utils/get-form');\n\nvar _getForm2 = _interopRequireDefault(_getForm);\n\nvar _getModel = require('../utils/get-model');\n\nvar _getModel2 = _interopRequireDefault(_getModel);\n\nvar _getField = require('../utils/get-field');\n\nvar _getField2 = _interopRequireDefault(_getField);\n\nvar _deepCompareChildren = require('../utils/deep-compare-children');\n\nvar _deepCompareChildren2 = _interopRequireDefault(_deepCompareChildren);\n\nvar _containsEvent = require('../utils/contains-event');\n\nvar _containsEvent2 = _interopRequireDefault(_containsEvent);\n\nvar _mergeValidity = require('../utils/merge-validity');\n\nvar _mergeValidity2 = _interopRequireDefault(_mergeValidity);\n\nvar _invariant = require('invariant');\n\nvar _invariant2 = _interopRequireDefault(_invariant);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar propTypes = {\n  component: _propTypes2.default.any,\n  validators: _propTypes2.default.oneOfType([_propTypes2.default.object, _propTypes2.default.func]),\n  errors: _propTypes2.default.object,\n  validateOn: _propTypes2.default.oneOf(['change', 'submit']),\n  model: _propTypes2.default.string.isRequired,\n  modelValue: _propTypes2.default.any,\n  formValue: _propTypes2.default.object,\n  onSubmit: _propTypes2.default.func,\n  onSubmitFailed: _propTypes2.default.func,\n  dispatch: _propTypes2.default.func,\n  children: _propTypes2.default.oneOfType([_propTypes2.default.func, _propTypes2.default.node]),\n  store: _propTypes2.default.shape({\n    subscribe: _propTypes2.default.func,\n    dispatch: _propTypes2.default.func,\n    getState: _propTypes2.default.func\n  }),\n  storeSubscription: _propTypes2.default.any,\n  onUpdate: _propTypes2.default.func,\n  onChange: _propTypes2.default.func,\n  getRef: _propTypes2.default.func,\n  getDispatch: _propTypes2.default.func,\n  onBeforeSubmit: _propTypes2.default.func,\n  hideNativeErrors: _propTypes2.default.bool,\n  // standard HTML attributes\n  action: _propTypes2.default.string,\n  noValidate: _propTypes2.default.bool\n};\nvar htmlAttributes = ['action', 'noValidate'];\nvar disallowedPropTypeKeys = Object.keys(propTypes).filter(function (key) {\n  return htmlAttributes.indexOf(key) === -1;\n});\nvar defaultStrategy = {\n  get: _get3.default,\n  getForm: _getForm2.default,\n  actions: _actions2.default\n};\n\nfunction createFormClass() {\n  var s = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultStrategy;\n\n  var Form = function (_Component) {\n    _inherits(Form, _Component);\n\n    function Form(props) {\n      _classCallCheck(this, Form);\n\n      var _this = _possibleConstructorReturn(this, (Form.__proto__ || Object.getPrototypeOf(Form)).call(this, props));\n\n      _this.handleSubmit = _this.handleSubmit.bind(_this);\n      _this.handleReset = _this.handleReset.bind(_this);\n      _this.handleValidSubmit = _this.handleValidSubmit.bind(_this);\n      _this.handleInvalidSubmit = _this.handleInvalidSubmit.bind(_this);\n      _this.attachNode = _this.attachNode.bind(_this);\n      _this.state = {\n        lastSubmitEvent: null\n      };\n      return _this;\n    }\n\n    _createClass(Form, [{\n      key: 'getChildContext',\n      value: function getChildContext() {\n        return {\n          model: this.props.model,\n          localStore: this.props.store\n        };\n      }\n    }, {\n      key: 'componentDidMount',\n      value: function componentDidMount() {\n        if ((0, _containsEvent2.default)(this.props.validateOn, 'change')) {\n          this.validate(this.props, true);\n        }\n\n        if (this.props.getDispatch) {\n          this.props.getDispatch(this.props.dispatch);\n        }\n      }\n    }, {\n      key: 'componentWillReceiveProps',\n      value: function componentWillReceiveProps(nextProps) {\n        if ((0, _containsEvent2.default)(nextProps.validateOn, 'change')) {\n          this.validate(nextProps);\n        }\n      }\n    }, {\n      key: 'shouldComponentUpdate',\n      value: function shouldComponentUpdate(nextProps, nextState) {\n        return (0, _deepCompareChildren2.default)(this, nextProps, nextState);\n      }\n    }, {\n      key: 'componentDidUpdate',\n      value: function componentDidUpdate(prevProps) {\n        this.handleIntents();\n\n        if (!(0, _shallowEqual2.default)(prevProps.formValue, this.props.formValue)) {\n          this.handleUpdate();\n        }\n\n        if (!(0, _shallowEqual2.default)(prevProps.modelValue, this.props.modelValue)) {\n          this.handleChange();\n        }\n      }\n    }, {\n      key: 'handleUpdate',\n      value: function handleUpdate() {\n        if (this.props.onUpdate) {\n          this.props.onUpdate(this.props.formValue);\n        }\n      }\n    }, {\n      key: 'handleChange',\n      value: function handleChange() {\n        if (this.props.onChange) {\n          this.props.onChange(this.props.modelValue);\n        }\n      }\n    }, {\n      key: 'attachNode',\n      value: function attachNode(node) {\n        if (!node) return;\n        this._node = node;\n        this._node.submit = this.handleSubmit;\n        if (this.props.getRef) this.props.getRef(node);\n      }\n    }, {\n      key: 'validate',\n      value: function validate(nextProps) {\n        var _this2 = this;\n\n        var initial = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        var submit = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n        var _props = this.props,\n            model = _props.model,\n            dispatch = _props.dispatch,\n            formValue = _props.formValue,\n            modelValue = _props.modelValue;\n        var validators = nextProps.validators,\n            errors = nextProps.errors;\n        if (!formValue) return;\n\n        if (!validators && !errors && modelValue !== nextProps.modelValue) {\n          return;\n        }\n\n        var validatorsChanged = validators !== this.props.validators || errors !== this.props.errors;\n        var fieldKeys = (validators ? Object.keys(validators) : []).concat(errors ? Object.keys(errors) : []);\n        var fieldsErrors = {};\n        var validityChanged = false;\n        var keysToValidate = [];\n        fieldKeys.forEach(function (key) {\n          if (!!~keysToValidate.indexOf(key)) return;\n          var valuesChanged = key === '' ? modelValue !== nextProps.modelValue : s.get(modelValue, key) !== s.get(nextProps.modelValue, key);\n\n          if (submit || initial || valuesChanged || validators && _this2.props.validators[key] !== validators[key] || errors && _this2.props.errors[key] !== errors[key] || !!~key.indexOf('[]')) {\n            keysToValidate.push(key);\n          }\n        });\n\n        var validateField = function validateField(field, errorValidator) {\n          if (!!~field.indexOf('[]')) {\n            var _field$split = field.split('[]'),\n                _field$split2 = _slicedToArray(_field$split, 2),\n                parentModel = _field$split2[0],\n                childModel = _field$split2[1];\n\n            var nextValue = parentModel ? s.get(nextProps.modelValue, parentModel) : nextProps.modelValue;\n            nextValue.forEach(function (subValue, index) {\n              validateField(parentModel + '[' + index + ']' + childModel, errorValidator);\n            });\n          } else {\n            var _nextValue = field ? s.get(nextProps.modelValue, field) : nextProps.modelValue;\n\n            var currentErrors = (0, _getField2.default)(formValue, field).errors;\n            var fieldErrors = (0, _getValidity2.default)(errorValidator, _nextValue);\n\n            if (!validityChanged && !(0, _shallowEqual2.default)(fieldErrors, currentErrors)) {\n              validityChanged = true;\n            }\n\n            fieldsErrors[field] = (0, _mergeValidity2.default)(fieldsErrors[field], fieldErrors);\n          }\n        };\n\n        keysToValidate.forEach(function (field) {\n          if (validators && validators[field]) {\n            validateField(field, (0, _invertValidators2.default)(validators[field]));\n          }\n\n          if (errors && errors[field]) {\n            validateField(field, errors[field]);\n          }\n        });\n\n        if (typeof validators === 'function') {\n          var nextValue = nextProps.modelValue;\n          var currentValue = modelValue;\n\n          if (!submit && !initial && !validatorsChanged && nextValue === currentValue) {\n            // If neither the validators nor the values have changed,\n            // the validity didn't change.\n            return;\n          }\n\n          var multiFieldErrors = (0, _getValidity2.default)(validators, nextValue);\n\n          if (multiFieldErrors) {\n            Object.keys(multiFieldErrors).forEach(function (key) {\n              // key will be the model value to apply errors to.\n              var fieldErrors = multiFieldErrors[key];\n              var currentErrors = (0, _getField2.default)(formValue, key).errors; // Invert validators\n\n              Object.keys(fieldErrors).forEach(function (validationName) {\n                fieldErrors[validationName] = !fieldErrors[validationName];\n              });\n\n              if (!validityChanged && !(0, _shallowEqual2.default)(fieldErrors, currentErrors)) {\n                validityChanged = true;\n              }\n\n              fieldsErrors[key] = (0, _mergeValidity2.default)(fieldsErrors[key], fieldErrors);\n            });\n          }\n        } // Compute form-level validity\n\n\n        if (!fieldsErrors.hasOwnProperty('') && !~fieldKeys.indexOf('')) {\n          fieldsErrors[''] = false;\n          validityChanged = validityChanged || (0, _isValidityInvalid2.default)(formValue.$form.errors);\n        }\n\n        if (validityChanged) {\n          dispatch(s.actions.setFieldsErrors(model, fieldsErrors, {\n            merge: true\n          }));\n        }\n\n        if (submit) {\n          dispatch(s.actions.addIntent(model, {\n            type: 'submit'\n          }));\n        }\n      }\n    }, {\n      key: 'handleValidSubmit',\n      value: function handleValidSubmit(options) {\n        var _props2 = this.props,\n            dispatch = _props2.dispatch,\n            model = _props2.model,\n            modelValue = _props2.modelValue,\n            onSubmit = _props2.onSubmit;\n        dispatch(s.actions.setPending(model, true, options));\n        if (onSubmit) onSubmit(modelValue, this.state.lastSubmitEvent);\n      }\n    }, {\n      key: 'handleInvalidSubmit',\n      value: function handleInvalidSubmit(options) {\n        var _props3 = this.props,\n            onSubmitFailed = _props3.onSubmitFailed,\n            formValue = _props3.formValue,\n            dispatch = _props3.dispatch;\n\n        if (onSubmitFailed) {\n          onSubmitFailed(formValue);\n        }\n\n        dispatch(s.actions.setSubmitFailed(this.props.model, true, options));\n      }\n    }, {\n      key: 'handleReset',\n      value: function handleReset(e) {\n        if (e) e.preventDefault();\n        this.props.dispatch(s.actions.reset(this.props.model));\n      }\n    }, {\n      key: 'handleIntents',\n      value: function handleIntents() {\n        var _this3 = this;\n\n        var _props4 = this.props,\n            formValue = _props4.formValue,\n            noValidate = _props4.noValidate;\n        formValue.$form.intents.forEach(function (intent) {\n          switch (intent.type) {\n            case 'submit':\n              {\n                if (noValidate || (0, _isValid2.default)(formValue, {\n                  async: false\n                })) {\n                  _this3.handleValidSubmit({\n                    clearIntents: intent\n                  });\n                } else {\n                  _this3.handleInvalidSubmit({\n                    clearIntents: intent\n                  });\n                }\n\n                return;\n              }\n\n            default:\n              return;\n          }\n        });\n      }\n    }, {\n      key: 'handleSubmit',\n      value: function handleSubmit(e) {\n        if (e && !this.props.action) e.preventDefault();\n        if (e && e.persist) e.persist();\n        var _props5 = this.props,\n            modelValue = _props5.modelValue,\n            formValue = _props5.formValue,\n            onSubmit = _props5.onSubmit,\n            validators = _props5.validators,\n            onBeforeSubmit = _props5.onBeforeSubmit;\n        if (onBeforeSubmit) onBeforeSubmit(e);\n        var formValid = formValue ? formValue.$form.valid : true;\n\n        if (!validators && onSubmit && formValid) {\n          onSubmit(modelValue, e);\n          return modelValue;\n        }\n\n        this.setState({\n          lastSubmitEvent: e\n        });\n        this.validate(this.props, false, true);\n        return modelValue;\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        var _props6 = this.props,\n            component = _props6.component,\n            children = _props6.children,\n            formValue = _props6.formValue,\n            hideNativeErrors = _props6.hideNativeErrors,\n            noValidate = _props6.noValidate;\n        var allowedProps = (0, _omit2.default)(this.props, disallowedPropTypeKeys);\n        var renderableChildren = typeof children === 'function' ? children(formValue) : children;\n        return _react2.default.createElement(component, _extends({}, allowedProps, {\n          onSubmit: this.handleSubmit,\n          onReset: this.handleReset,\n          ref: this.attachNode,\n          noValidate: hideNativeErrors || noValidate\n        }), renderableChildren);\n      }\n    }]);\n\n    return Form;\n  }(_react.Component);\n\n  process.env.NODE_ENV !== \"production\" ? Form.propTypes = propTypes : void 0;\n  Form.defaultProps = {\n    validateOn: 'change',\n    component: 'form'\n  };\n  Form.childContextTypes = {\n    model: _propTypes2.default.any,\n    localStore: _propTypes2.default.shape({\n      subscribe: _propTypes2.default.func,\n      dispatch: _propTypes2.default.func,\n      getState: _propTypes2.default.func\n    })\n  };\n\n  function mapStateToProps(state, _ref) {\n    var model = _ref.model;\n    var modelString = (0, _getModel2.default)(model, state);\n    var form = s.getForm(state, modelString);\n    (0, _invariant2.default)(form, 'Unable to create Form component. ' + 'Could not find form for \"%s\" in the store.', modelString);\n    return {\n      model: modelString,\n      modelValue: s.get(state, modelString),\n      formValue: form\n    };\n  }\n\n  return (0, _reactRedux.connect)(mapStateToProps)(Form);\n}\n\nexports.createFormClass = createFormClass;\nexports.default = createFormClass();","map":{"version":3,"names":["Object","defineProperty","exports","value","createFormClass","undefined","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_i","Symbol","iterator","_s","next","done","push","err","Array","isArray","TypeError","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react","require","_react2","_interopRequireDefault","_propTypes","_propTypes2","_reactRedux","_shallowEqual","_shallowEqual2","_get2","_get3","_omit","_omit2","_actions","_actions2","_getValidity","_getValidity2","_invertValidators","_invertValidators2","_isValidityInvalid","_isValidityInvalid2","_isValid","_isValid2","_getForm","_getForm2","_getModel","_getModel2","_getField","_getField2","_deepCompareChildren","_deepCompareChildren2","_containsEvent","_containsEvent2","_mergeValidity","_mergeValidity2","_invariant","_invariant2","obj","__esModule","default","_classCallCheck","instance","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","propTypes","component","any","validators","oneOfType","object","func","errors","validateOn","oneOf","model","string","isRequired","modelValue","formValue","onSubmit","onSubmitFailed","dispatch","children","node","store","shape","subscribe","getState","storeSubscription","onUpdate","onChange","getRef","getDispatch","onBeforeSubmit","hideNativeErrors","bool","action","noValidate","htmlAttributes","disallowedPropTypeKeys","keys","filter","indexOf","defaultStrategy","get","getForm","actions","s","Form","_Component","_this","getPrototypeOf","handleSubmit","bind","handleReset","handleValidSubmit","handleInvalidSubmit","attachNode","state","lastSubmitEvent","getChildContext","localStore","componentDidMount","validate","componentWillReceiveProps","nextProps","shouldComponentUpdate","nextState","componentDidUpdate","prevProps","handleIntents","handleUpdate","handleChange","_node","submit","_this2","initial","_props","validatorsChanged","fieldKeys","concat","fieldsErrors","validityChanged","keysToValidate","forEach","valuesChanged","validateField","field","errorValidator","_field$split","split","_field$split2","parentModel","childModel","nextValue","subValue","index","_nextValue","currentErrors","fieldErrors","currentValue","multiFieldErrors","validationName","$form","setFieldsErrors","merge","addIntent","type","options","_props2","setPending","_props3","setSubmitFailed","e","preventDefault","reset","_this3","_props4","intents","intent","async","clearIntents","persist","_props5","formValid","valid","setState","render","_props6","allowedProps","renderableChildren","createElement","onReset","ref","Component","process","env","NODE_ENV","defaultProps","childContextTypes","mapStateToProps","_ref","modelString","form","connect"],"sources":["C:/Users/ASUS/Documents/GitHub/Funix_lab/lab02_2/node_modules/react-redux-form/lib/components/form-component.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createFormClass = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactRedux = require('react-redux');\n\nvar _shallowEqual = require('../utils/shallow-equal');\n\nvar _shallowEqual2 = _interopRequireDefault(_shallowEqual);\n\nvar _get2 = require('../utils/get');\n\nvar _get3 = _interopRequireDefault(_get2);\n\nvar _omit = require('../utils/omit');\n\nvar _omit2 = _interopRequireDefault(_omit);\n\nvar _actions = require('../actions');\n\nvar _actions2 = _interopRequireDefault(_actions);\n\nvar _getValidity = require('../utils/get-validity');\n\nvar _getValidity2 = _interopRequireDefault(_getValidity);\n\nvar _invertValidators = require('../utils/invert-validators');\n\nvar _invertValidators2 = _interopRequireDefault(_invertValidators);\n\nvar _isValidityInvalid = require('../utils/is-validity-invalid');\n\nvar _isValidityInvalid2 = _interopRequireDefault(_isValidityInvalid);\n\nvar _isValid = require('../form/is-valid');\n\nvar _isValid2 = _interopRequireDefault(_isValid);\n\nvar _getForm = require('../utils/get-form');\n\nvar _getForm2 = _interopRequireDefault(_getForm);\n\nvar _getModel = require('../utils/get-model');\n\nvar _getModel2 = _interopRequireDefault(_getModel);\n\nvar _getField = require('../utils/get-field');\n\nvar _getField2 = _interopRequireDefault(_getField);\n\nvar _deepCompareChildren = require('../utils/deep-compare-children');\n\nvar _deepCompareChildren2 = _interopRequireDefault(_deepCompareChildren);\n\nvar _containsEvent = require('../utils/contains-event');\n\nvar _containsEvent2 = _interopRequireDefault(_containsEvent);\n\nvar _mergeValidity = require('../utils/merge-validity');\n\nvar _mergeValidity2 = _interopRequireDefault(_mergeValidity);\n\nvar _invariant = require('invariant');\n\nvar _invariant2 = _interopRequireDefault(_invariant);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar propTypes = {\n  component: _propTypes2.default.any,\n  validators: _propTypes2.default.oneOfType([_propTypes2.default.object, _propTypes2.default.func]),\n  errors: _propTypes2.default.object,\n  validateOn: _propTypes2.default.oneOf(['change', 'submit']),\n  model: _propTypes2.default.string.isRequired,\n  modelValue: _propTypes2.default.any,\n  formValue: _propTypes2.default.object,\n  onSubmit: _propTypes2.default.func,\n  onSubmitFailed: _propTypes2.default.func,\n  dispatch: _propTypes2.default.func,\n  children: _propTypes2.default.oneOfType([_propTypes2.default.func, _propTypes2.default.node]),\n  store: _propTypes2.default.shape({\n    subscribe: _propTypes2.default.func,\n    dispatch: _propTypes2.default.func,\n    getState: _propTypes2.default.func\n  }),\n  storeSubscription: _propTypes2.default.any,\n  onUpdate: _propTypes2.default.func,\n  onChange: _propTypes2.default.func,\n  getRef: _propTypes2.default.func,\n  getDispatch: _propTypes2.default.func,\n  onBeforeSubmit: _propTypes2.default.func,\n  hideNativeErrors: _propTypes2.default.bool,\n\n  // standard HTML attributes\n  action: _propTypes2.default.string,\n  noValidate: _propTypes2.default.bool\n};\n\nvar htmlAttributes = ['action', 'noValidate'];\nvar disallowedPropTypeKeys = Object.keys(propTypes).filter(function (key) {\n  return htmlAttributes.indexOf(key) === -1;\n});\n\nvar defaultStrategy = {\n  get: _get3.default,\n  getForm: _getForm2.default,\n  actions: _actions2.default\n};\n\nfunction createFormClass() {\n  var s = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultStrategy;\n\n  var Form = function (_Component) {\n    _inherits(Form, _Component);\n\n    function Form(props) {\n      _classCallCheck(this, Form);\n\n      var _this = _possibleConstructorReturn(this, (Form.__proto__ || Object.getPrototypeOf(Form)).call(this, props));\n\n      _this.handleSubmit = _this.handleSubmit.bind(_this);\n      _this.handleReset = _this.handleReset.bind(_this);\n      _this.handleValidSubmit = _this.handleValidSubmit.bind(_this);\n      _this.handleInvalidSubmit = _this.handleInvalidSubmit.bind(_this);\n      _this.attachNode = _this.attachNode.bind(_this);\n\n      _this.state = {\n        lastSubmitEvent: null\n      };\n      return _this;\n    }\n\n    _createClass(Form, [{\n      key: 'getChildContext',\n      value: function getChildContext() {\n        return {\n          model: this.props.model,\n          localStore: this.props.store\n        };\n      }\n    }, {\n      key: 'componentDidMount',\n      value: function componentDidMount() {\n        if ((0, _containsEvent2.default)(this.props.validateOn, 'change')) {\n          this.validate(this.props, true);\n        }\n\n        if (this.props.getDispatch) {\n          this.props.getDispatch(this.props.dispatch);\n        }\n      }\n    }, {\n      key: 'componentWillReceiveProps',\n      value: function componentWillReceiveProps(nextProps) {\n        if ((0, _containsEvent2.default)(nextProps.validateOn, 'change')) {\n          this.validate(nextProps);\n        }\n      }\n    }, {\n      key: 'shouldComponentUpdate',\n      value: function shouldComponentUpdate(nextProps, nextState) {\n        return (0, _deepCompareChildren2.default)(this, nextProps, nextState);\n      }\n    }, {\n      key: 'componentDidUpdate',\n      value: function componentDidUpdate(prevProps) {\n        this.handleIntents();\n\n        if (!(0, _shallowEqual2.default)(prevProps.formValue, this.props.formValue)) {\n          this.handleUpdate();\n        }\n\n        if (!(0, _shallowEqual2.default)(prevProps.modelValue, this.props.modelValue)) {\n          this.handleChange();\n        }\n      }\n    }, {\n      key: 'handleUpdate',\n      value: function handleUpdate() {\n        if (this.props.onUpdate) {\n          this.props.onUpdate(this.props.formValue);\n        }\n      }\n    }, {\n      key: 'handleChange',\n      value: function handleChange() {\n        if (this.props.onChange) {\n          this.props.onChange(this.props.modelValue);\n        }\n      }\n    }, {\n      key: 'attachNode',\n      value: function attachNode(node) {\n        if (!node) return;\n\n        this._node = node;\n\n        this._node.submit = this.handleSubmit;\n        if (this.props.getRef) this.props.getRef(node);\n      }\n    }, {\n      key: 'validate',\n      value: function validate(nextProps) {\n        var _this2 = this;\n\n        var initial = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        var submit = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n        var _props = this.props,\n            model = _props.model,\n            dispatch = _props.dispatch,\n            formValue = _props.formValue,\n            modelValue = _props.modelValue;\n        var validators = nextProps.validators,\n            errors = nextProps.errors;\n\n\n        if (!formValue) return;\n\n        if (!validators && !errors && modelValue !== nextProps.modelValue) {\n          return;\n        }\n\n        var validatorsChanged = validators !== this.props.validators || errors !== this.props.errors;\n        var fieldKeys = (validators ? Object.keys(validators) : []).concat(errors ? Object.keys(errors) : []);\n\n        var fieldsErrors = {};\n        var validityChanged = false;\n\n        var keysToValidate = [];\n\n        fieldKeys.forEach(function (key) {\n          if (!!~keysToValidate.indexOf(key)) return;\n\n          var valuesChanged = key === '' ? modelValue !== nextProps.modelValue : s.get(modelValue, key) !== s.get(nextProps.modelValue, key);\n\n          if (submit || initial || valuesChanged || validators && _this2.props.validators[key] !== validators[key] || errors && _this2.props.errors[key] !== errors[key] || !!~key.indexOf('[]')) {\n            keysToValidate.push(key);\n          }\n        });\n\n        var validateField = function validateField(field, errorValidator) {\n          if (!!~field.indexOf('[]')) {\n            var _field$split = field.split('[]'),\n                _field$split2 = _slicedToArray(_field$split, 2),\n                parentModel = _field$split2[0],\n                childModel = _field$split2[1];\n\n            var nextValue = parentModel ? s.get(nextProps.modelValue, parentModel) : nextProps.modelValue;\n\n            nextValue.forEach(function (subValue, index) {\n              validateField(parentModel + '[' + index + ']' + childModel, errorValidator);\n            });\n          } else {\n            var _nextValue = field ? s.get(nextProps.modelValue, field) : nextProps.modelValue;\n\n            var currentErrors = (0, _getField2.default)(formValue, field).errors;\n            var fieldErrors = (0, _getValidity2.default)(errorValidator, _nextValue);\n\n            if (!validityChanged && !(0, _shallowEqual2.default)(fieldErrors, currentErrors)) {\n              validityChanged = true;\n            }\n\n            fieldsErrors[field] = (0, _mergeValidity2.default)(fieldsErrors[field], fieldErrors);\n          }\n        };\n\n        keysToValidate.forEach(function (field) {\n          if (validators && validators[field]) {\n            validateField(field, (0, _invertValidators2.default)(validators[field]));\n          }\n          if (errors && errors[field]) {\n            validateField(field, errors[field]);\n          }\n        });\n\n        if (typeof validators === 'function') {\n          var nextValue = nextProps.modelValue;\n          var currentValue = modelValue;\n\n          if (!submit && !initial && !validatorsChanged && nextValue === currentValue) {\n            // If neither the validators nor the values have changed,\n            // the validity didn't change.\n            return;\n          }\n\n          var multiFieldErrors = (0, _getValidity2.default)(validators, nextValue);\n\n          if (multiFieldErrors) {\n            Object.keys(multiFieldErrors).forEach(function (key) {\n              // key will be the model value to apply errors to.\n              var fieldErrors = multiFieldErrors[key];\n              var currentErrors = (0, _getField2.default)(formValue, key).errors;\n\n              // Invert validators\n              Object.keys(fieldErrors).forEach(function (validationName) {\n                fieldErrors[validationName] = !fieldErrors[validationName];\n              });\n\n              if (!validityChanged && !(0, _shallowEqual2.default)(fieldErrors, currentErrors)) {\n                validityChanged = true;\n              }\n\n              fieldsErrors[key] = (0, _mergeValidity2.default)(fieldsErrors[key], fieldErrors);\n            });\n          }\n        }\n\n        // Compute form-level validity\n        if (!fieldsErrors.hasOwnProperty('') && !~fieldKeys.indexOf('')) {\n          fieldsErrors[''] = false;\n          validityChanged = validityChanged || (0, _isValidityInvalid2.default)(formValue.$form.errors);\n        }\n\n        if (validityChanged) {\n          dispatch(s.actions.setFieldsErrors(model, fieldsErrors, { merge: true }));\n        }\n\n        if (submit) {\n          dispatch(s.actions.addIntent(model, { type: 'submit' }));\n        }\n      }\n    }, {\n      key: 'handleValidSubmit',\n      value: function handleValidSubmit(options) {\n        var _props2 = this.props,\n            dispatch = _props2.dispatch,\n            model = _props2.model,\n            modelValue = _props2.modelValue,\n            onSubmit = _props2.onSubmit;\n\n\n        dispatch(s.actions.setPending(model, true, options));\n\n        if (onSubmit) onSubmit(modelValue, this.state.lastSubmitEvent);\n      }\n    }, {\n      key: 'handleInvalidSubmit',\n      value: function handleInvalidSubmit(options) {\n        var _props3 = this.props,\n            onSubmitFailed = _props3.onSubmitFailed,\n            formValue = _props3.formValue,\n            dispatch = _props3.dispatch;\n\n\n        if (onSubmitFailed) {\n          onSubmitFailed(formValue);\n        }\n\n        dispatch(s.actions.setSubmitFailed(this.props.model, true, options));\n      }\n    }, {\n      key: 'handleReset',\n      value: function handleReset(e) {\n        if (e) e.preventDefault();\n\n        this.props.dispatch(s.actions.reset(this.props.model));\n      }\n    }, {\n      key: 'handleIntents',\n      value: function handleIntents() {\n        var _this3 = this;\n\n        var _props4 = this.props,\n            formValue = _props4.formValue,\n            noValidate = _props4.noValidate;\n\n\n        formValue.$form.intents.forEach(function (intent) {\n          switch (intent.type) {\n            case 'submit':\n              {\n                if (noValidate || (0, _isValid2.default)(formValue, { async: false })) {\n                  _this3.handleValidSubmit({ clearIntents: intent });\n                } else {\n                  _this3.handleInvalidSubmit({ clearIntents: intent });\n                }\n\n                return;\n              }\n\n            default:\n              return;\n          }\n        });\n      }\n    }, {\n      key: 'handleSubmit',\n      value: function handleSubmit(e) {\n        if (e && !this.props.action) e.preventDefault();\n        if (e && e.persist) e.persist();\n\n        var _props5 = this.props,\n            modelValue = _props5.modelValue,\n            formValue = _props5.formValue,\n            onSubmit = _props5.onSubmit,\n            validators = _props5.validators,\n            onBeforeSubmit = _props5.onBeforeSubmit;\n\n\n        if (onBeforeSubmit) onBeforeSubmit(e);\n\n        var formValid = formValue ? formValue.$form.valid : true;\n\n        if (!validators && onSubmit && formValid) {\n          onSubmit(modelValue, e);\n\n          return modelValue;\n        }\n\n        this.setState({ lastSubmitEvent: e });\n\n        this.validate(this.props, false, true);\n\n        return modelValue;\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        var _props6 = this.props,\n            component = _props6.component,\n            children = _props6.children,\n            formValue = _props6.formValue,\n            hideNativeErrors = _props6.hideNativeErrors,\n            noValidate = _props6.noValidate;\n\n\n        var allowedProps = (0, _omit2.default)(this.props, disallowedPropTypeKeys);\n        var renderableChildren = typeof children === 'function' ? children(formValue) : children;\n\n        return _react2.default.createElement(component, _extends({}, allowedProps, {\n          onSubmit: this.handleSubmit,\n          onReset: this.handleReset,\n          ref: this.attachNode,\n          noValidate: hideNativeErrors || noValidate\n        }), renderableChildren);\n      }\n    }]);\n\n    return Form;\n  }(_react.Component);\n\n  process.env.NODE_ENV !== \"production\" ? Form.propTypes = propTypes : void 0;\n\n  Form.defaultProps = {\n    validateOn: 'change',\n    component: 'form'\n  };\n\n  Form.childContextTypes = {\n    model: _propTypes2.default.any,\n    localStore: _propTypes2.default.shape({\n      subscribe: _propTypes2.default.func,\n      dispatch: _propTypes2.default.func,\n      getState: _propTypes2.default.func\n    })\n  };\n\n  function mapStateToProps(state, _ref) {\n    var model = _ref.model;\n\n    var modelString = (0, _getModel2.default)(model, state);\n    var form = s.getForm(state, modelString);\n\n    (0, _invariant2.default)(form, 'Unable to create Form component. ' + 'Could not find form for \"%s\" in the store.', modelString);\n\n    return {\n      model: modelString,\n      modelValue: s.get(state, modelString),\n      formValue: form\n    };\n  }\n\n  return (0, _reactRedux.connect)(mapStateToProps)(Form);\n}\n\nexports.createFormClass = createFormClass;\nexports.default = createFormClass();"],"mappings":"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"},"metadata":{},"sourceType":"script"}